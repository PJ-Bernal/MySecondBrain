---
note_type: note
tags:
  - programming
  - c#
  - web_development
  - .net_web_api
  - security
  - oauth2
mn:
  - "[[12 Web Dev]]}"
  - "[[13.7 C Sharp]]"
kt: theorical
checked:
---
[[13.9 ASP.NET Core Web API|ASP.NET Core Web API]]

Authentication schemes and its configurations are registered services in `Program.cs` through `AddAuthentication()`. Inside I can specify the default authentication, challenge and default scheme.

```c#
builder.Services.AddAuthentication(x =>
{
    x.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;
    x.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;
    x.DefaultScheme = JwtBearerDefaults.AuthenticationScheme;
})
```

If the API is gong to be consumed by a web app and another API I can use this set up.

```c#
builder.Services.AddAuthentication(options =>
{
    options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;
    options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;
    options.DefaultScheme = CookieAuthenticationDefaults.AuthenticationScheme; // Fallback for other scenarios
})
```
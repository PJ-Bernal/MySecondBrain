---
note_type: note
tags:
  - web_development
  - javascript
  - events
mn: "[[12.5 Javascript]]"
kt: theorical
checked: 
resources:
  - "[JavaScript dispatchEvent](https://www.javascripttutorial.net/javascript-dom/javascript-dispatchevent/)"
---
[[12.5 Javascript|JavaScript]]

Though events are generated by user actions, I can capture events from event listeners (using the Event constructor) to manually trigger them when I want (using the dispatch method). 
## The event constructor
>[!multi-column]
>
>This constructor takes to parameters: 
>%% %%
>type: string that specifies the event type (like `click`).
>
>```javascript
>const myEvent = new Event(type, [,options]);
>const clickEvent = new Event('click');
>// Event with default options object
>```

options: object with two optional properties:
- `bubbles`: boolean that determine if the even bubbles, true if it does. 
- `cancelable`: boolean that determines whether the event is cancelable when is true. 

By default, the options object is: `{ bubbles: false, cancelable: false}`. 

## DispatchEvent method
Use `element.dispatchEvent(event);` to trigger a coded event. 

```HTML
<button class="btn">Test</button>
```

```javascript
let btn = document.querySelector('.btn');

// I already have the event and the associated 'response'
 btn.addEventListener('click', function () {
        alert('Mouse Clicked');
 });

// Capturing the event in a variable using the Event constructor
let clickEvent = new Event('click');
// Triggers the event manually 
btn.dispatchEvent(clickEvent); 
```

In this example, the event happens **without** the user clicking the button. Detail the HTML hasn't been rendered yet, but the action already happened. 

![[Pasted image 20240401083218.png]]

>[!important] User or code event. Determine the authenticity of an event
>When the even comes from a user action, the `event.isTrusted` property is true. If comes from code, the property is false.

## Example
```html
<p>
  <label><input type="checkbox" id="checkbox" /> Checked</label>
</p>
<p>
  <button id="button">Click me to send a MouseEvent to the checkbox</button>
</p>
```

```js
function simulateClick() {
  // Get the element to send a click event
  const cb = document.getElementById("checkbox");

  // Create a synthetic click MouseEvent
  let evt = new MouseEvent("click", {
    bubbles: true,
    cancelable: true,
    view: window,
  });

  // Send the event to the checkbox element
  cb.dispatchEvent(evt);
}

const btn = document.getElementById("button");

btn.addEventListener("click", simulateClick);

```

![[Pasted image 20240808092522.png]]

In this example: 
1. I determine what's the element that is going to perform the event, in this case, the button. So I select it and create an event listener. 
```js
const btn = document.getElementById("button");

btn.addEventListener("click", simulateClick);
```

2. Though I can use an arrow function, I rather decide to use a defined function to improve code readability. Then, I think what is going to affect this event; in this case is the checkbox.

```js
function simulateClick() {
  const cb = document.getElementById("checkbox");
}
```

3. The checkbox will perform some action without the user interaction, therefore I need to code a method and dispatched it. The properties inside the synthetic event are not required, but I need to keep them in mind if I need to control bubbling, cancelable and put some scope of the event. 
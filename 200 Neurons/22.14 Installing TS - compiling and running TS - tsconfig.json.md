---
note_type: note
tags:
  - web_development
  - javascript
  - typescript
  - introduction
mn: "[[12.14 Typescript]]"
kt: theorical
checked: false
---
[[12.14 Typescript|Typescript]]

# Install TS
Install TS using `pnpm add typescript -D`, this will add a TS compiler (tsc) to compile TS into JS. 

# Transpile and execute TS code
- To transpile TS code use `pnpm exec tsc --Outdir <directory for the transpiled TS code> <file to transpile>` , or just `pnpm exec tsc` if I have a `tsconofig.json` file. 
- To execute transpiled TS code use node, which only understands JS: `node <js file to execute>`

The result of compile a TS directory/file will be at least a JS file (it could also contain declaration and source map files. )


# Automating the code-build-run cycle -  tsconfig-json
The `tsconfig.json` is a project configuration file that hold a lot of compiler options **the compiler** will read and use when transpiling TS code. If the root directory has this file, then, the root will be considered a TS project. 

To create this project file `npnm exec tsc --init`. This file will have all the possible options. 

This is a good `tsconfig.json` configuration file for React:

```json
{
  "compilerOptions": {
    "target": "ES2022",               // Modern JavaScript features
    "module": "NodeNext",               // Use ES modules
    "moduleResolution": "nodenext",   // Resolve modules like Node.js
    "jsx": "react-jsx",               // Transform JSX for React 17+ (auto-imports React)
    "strict": true,                   // Enable all strict type-checking
    "skipLibCheck": true,             // Skip type-checking libraries (faster builds)
    "esModuleInterop": true,          // Better compatibility with CommonJS modules
    "outDir": "dist",                 // Output directory for compiled files
    "rootDir": "src",                 // Source directory
    "allowJs": true,                  // Allow compiling JavaScript files
    "forceConsistentCasingInFileNames": true, // Prevent case-related bugs
    "declaration": true  
  },
  "include": ["src"],                 // Include files in `src` folder
  "exclude": ["node_modules", "dist"] // Exclude unnecessary folders
}
```

For a react project, the tsconfig file is a bit different

```json
{
  "compilerOptions": {
    "target": "ES6", // or "ES5"
    "module": "ESNext", // or "CommonJS"
    "lib": ["DOM", "DOM.Iterable", "ESNext"],
    "allowJs": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "moduleResolution": "Node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true, // Important for React apps using bundlers like Webpack or Vite
    "jsx": "react-jsx" // or "preserve" or "react"
  },
  "include": ["src"]
- 
}
```

```json
{
  "compilerOptions": {
    "target": "ES6",  // Modern JavaScript feature
    "noEmit": true, 
    "strict": true,
    "declaration": true,
    "declarationDir": "types",
    "moduleResolution": "Node",
    "rootDir": "src",
    "outDir": "dist",
    
  },
  "include": ["src"],                 // Include files in `src` folder
  "exclude": ["node_modules", "dist"] // Exclude unnecessary folders
}
```

## About the properties
- `include`: directory that will be compiled. 
- `"noEmit": true`: the compilation process won't create any files. So I can compile a react project with this flag on to see if I have any type-checking errors. 

Bundlers generally are in charge of the compilation process. In the case of Vite, the `dev` script will use the Vite compiler creating one minified JS file. The `build` script will call the TS compiler and then the Vite compiler, but I don't need the result of the TS compilation process (the JS files), so that's why this property should be true. 

- `"declaration": true`. Creates a declaration file for the compiled files. 
- `"declarationDir"`: specify a directory to which declaration files are output. If no directory is specify, all declaration files will be on the `outDir` directory. Is common to have a `types` directory for those. 
- `"target": ES6`. Good choice. 

## Declaration file
>[!blank-container|float-left-medium]
>![[Pasted image 20250214104519.png]]

The declaration file includes type details for the developers of the project. Add the `"declaration": true` to the `tsconfig.json` file.

## VS Code task
>[!blank-container|float-left]
>```json
>{
>    // See https://go.microsoft.com/fwlink/?LinkId=733558
>    // for the documentation about the tasks.json format
>    "version": "2.0.0",
>    "tasks": [
>        {
>            "label": "Compile TS",
>            "type": "shell",
>            "command": "tsc",
>            "presentation":{
>              "echo": false, 
>              "reveal": "silent",
>              "focus": false,
>              "panel": "shared",
>              "showReuseMessage": false,
>              "clear": false
>            }
>        }
>    ]
>}
>```

Open the command palette -> tasks -> Configure task -> Create tasks.json file from template -> others -> `tasks.json` file is created.














## Configure how VS Code run the program
Click on debug at the left -> create a `launch.json` file -> `Node.js` -> A `launch.json` file is created in the `.vscode` directory. The launch file controls how the program runs. 

```json
{
  // Use IntelliSense to learn about possible attributes.
  // Hover to view descriptions of existing attributes.
  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "Launch Program",
      "skipFiles": [
        "<node_internals>/**"
      ],
      "program": "${workspaceFolder}\\js\\app.js",
      "outFiles": [
        "${workspaceFolder}/**/*.js"
      ],
      "preLaunchTask": "Compile TypeScript",
      "internalConsoleOptions": "openOnSessionStart"
    }
  ]
}
```

After this, just hit F5 to run the TS file.